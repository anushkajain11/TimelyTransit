<!DOCTYPE html>
<html ng-app="myApp">

  <head>
    <meta charset="utf-8"/>
    <title>Timely Transit</title>
    <script>document.write('<base href="' + document.location + '" />');</script>
    <script data-require="angular.js@1.0.x" src="https://ajax.googleapis.com/ajax/libs/angularjs/1.0.7/angular.js" data-semver="1.0.7"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
 <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
    <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
    <script src="http://maps.googleapis.com/maps/api/js?sensor=false&libraries=places"></script>
    <script src="http://jvandemo.github.io/angularjs-google-maps/dist/angularjs-google-maps.js"></script>
    <script src="js/map.js"></script>
      <script>
      
      function buildURL () {
          var src;
          var srclat;
          var srclong;
          console.log('inside build')
             navigator.geolocation.getCurrentPosition(function (pos) {
                srclat = pos.coords.latitude;
                srclong = pos.coords.longitude;
                var des = document.getElementById("des");
                var check = document.getElementById("check");
                if(check.value === 'My Location') {
                    location.href="routes.html?srclat="+srclat+"&srclong="+srclong+"&des="+des.value;
                }
                else{
                    location.href="routes.html?src="+check.value+"&des="+des.value;                    
                }
      //$scope.src = JSON.stringify(pos);
      //  $scope.src = 'abcd';
        
    }, function (error) {
      console.log('Unable to get location: ' + error.message);
    });
        
          
          
      }
      
      </script>
      <style type="text/css">
  button{
    background-color: rgb(0, 20, 255);
    box-shadow: none;
    color: white;
    font-size: 16px;
    font-weight: normal;
    padding: 12px 16px;
    border: 0;
  }
          .background {
              background-color: rgba(0,0,0,0.5);
}
</style>
</head>

  <body class="container-fluid" style="background-color: #eee;color: #000000;width: 100%;background-repeat:no-repeat;background-size:cover;"  background="/img/background.PNG" 
>
  <!--- <form action="routes.html" method="GET"> -->
  <div  class="background">
      <div ng-controller="location" >  
    

    <h3 style="color: white;">From:</h3>
    <input type="text" class="search-input" name="src" gm-places-autocomplete ng-model="autocomplete" id="check" value="My Location" style="width: 100%;font-size: 22px;background-color=lightgrey;"/>
    <input type="hidden" name="loc" id="loc" ng-model="src" />  
    </div>
    <div ng-controller="destination" style="align: center;">  
    <h3 style="color: white;">To:</h3>
    <input type="text" class="search-input"  gm-places-autocomplete id="des" ng-model="autocomplete" style="background-color=lightgrey;width: 100%;font-size: 22px"/>
    <br><br>
    </div>
      <a href="javascript:buildURL()">
          <button class="btn primary-btn js-dynamic-tooltip" type="submit" value="submit" style="width: 40%;height: 40%;">Search Buses</button></a>
<br><br>
      </div>
      <!---  </form>  -->
  </body>
</html>
